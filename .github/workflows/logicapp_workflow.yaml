jobs:
  create-logicapp-infra:
    env:
      AZURE_LOGICAPP_PACKAGE_PATH: .
      AZURE_SUBSCRIPTION: ad1e9f34-2525-4721-8777-445d89a891c7
      DEPLOY_ENV: ${{ matrix.azureenv }}
      DOTNET_VERSION: 3.1.301
      DPLOYMENT_NAME: TestlogicApp
      LOCATION: eastus2
      PARAMETERFILE_NAME: parameters.json
      RG_NAME: rg-by-workflow-shared-dev-eus2-01
      TEMPLATE_NAME: template.json
    environment: sandbox
    name: Create logicapp infra
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Set the env variables according to env
      run: 'echo ${{matrix.azureenv}}

        echo $DEPLOY_ENV

        '
    - name: Login to Azure
      uses: azure/login@v1
      with:
        creds: ${{ secrets.AZURE_CREDENTIALS }}
    - uses: whiteducksoftware/azure-arm-action@v3.2
      with:
        deploymentName: ${{ env.DPLOYMENT_NAME }}
        parameters: ${{ env.PARAMETERFILE_NAME }}
        resourceGroupName: "${\xE2\u20AC\u2039\xE2\u20AC\u2039\xE2\u20AC\u2039\xE2\
          \u20AC\u2039\xE2\u20AC\u2039\xE2\u20AC\u2039\xE2\u20AC\u2039{\xE2\u20AC\u2039\
          \xE2\u20AC\u2039\xE2\u20AC\u2039\xE2\u20AC\u2039\xE2\u20AC\u2039\xE2\u20AC\
          \u2039\xE2\u20AC\u2039 env.AZURE_RG }\xE2\u20AC\u2039\xE2\u20AC\u2039\xE2\
          \u20AC\u2039\xE2\u20AC\u2039\xE2\u20AC\u2039\xE2\u20AC\u2039\xE2\u20AC\u2039\
          }\xE2\u20AC\u2039\xE2\u20AC\u2039\xE2\u20AC\u2039\xE2\u20AC\u2039\xE2\u20AC\
          \u2039\xE2\u20AC\u2039\xE2\u20AC\u2039"
        templateLocation: ${{ env.TEMPLATE_NAME }}
    strategy:
      matrix:
        azureenv:
        - sandbox
name: Create azure infra for logic apps
'on':
  push:
    paths:
    - .github/workflows/logicapp_workflow.yaml
    - '*.json'
